{%- for import in imports %}
/// <reference path="./{{ import.name }}-{{ import.version }}.d.ts" />
{%- endfor %}

/**
 * Type Definitions for GJS (https://gjs.guide/), generated by [GirGen](https://github.com/aylur/girgen)
 * If you found a bug, create a bug report on [GirGen's Repository](https://github.com/aylur/girgen/issues/new)
 */
{% for namespace in namespaces -%}
declare module "gi://{{ namespace.name }}?version={{ namespace.version }}" {
    {%- for import in imports %}
    import type {{ import.name }} from "gi://{{ import.name }}?version={{ import.version }}"
    {%- endfor %}

    {{ namespace.extra_content|indent(4) }}

    namespace {{ namespace.name }} {
        {%- for class in namespace.classes %}
        {{ class|indent(8) }}
        {%- endfor %}

        {%- for interface in namespace.interfaces %}
        {{ interface|indent(8) }}
        {%- endfor %}

        {%- for record in namespace.records %}
        {{ record|indent(8) }}
        {%- endfor %}

        {%- for union in namespace.unions %}
        {{ union|indent(8) }}
        {%- endfor %}

        {%- for enum in namespace.enums %}
        {{ enum|indent(8) }}
        {%- endfor %}

        {%- for bitfield in namespace.bitfields %}
        {{ bitfield|indent(8) }}
        {%- endfor %}

        {%- for callback in namespace.callbacks %}
        {{ callback|indent(8) }}
        {%- endfor %}

        {%- for alias in namespace.aliases %}
        {{ alias|indent(8) }}
        {%- endfor %}

        interface $Exports {
            __name__: "{{ namespace.name }}"
            __version: "{{ namespace.version }}"

            {%- for constant in namespace.constants %}
            {{ constant|indent(12) }}
            {%- endfor %}

            {%- for function in namespace.functions %}
            {{ function|indent(12) }}
            {%- endfor %}
        }
    }

    const {{ namespace.name }}: {{ namespace.name }}.$Exports
    export default {{ namespace.name }}
}
{%- endfor -%}
